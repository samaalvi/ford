!function(e){var t={};function a(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,a),i.l=!0,i.exports}a.m=e,a.c=t,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)a.d(n,i,function(t){return e[t]}.bind(null,i));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="",a(a.s=0)}([function(e,t,a){"use strict";a.r(t);const n=e=>"object"==typeof e&&!!e;var i=e=>!Array.isArray(e)&&e-parseFloat(e)+1>=0,r=n,s=e=>"function"==typeof e,l=e=>null!=e&&(Array.isArray(e)?e:[e])||[],o=e=>JSON.parse(JSON.stringify(e));var c=e=>new Promise((t,a)=>{const n=document.createElement("script");n.type="text/javascript",n.addEventListener("load",()=>t(n),!1),n.addEventListener("error",()=>a(n),!1),n.src=e,document.body.appendChild(n)});class m extends Error{constructor(e){super(e.statusText),this.response=e}}const u={dataType:"json",headers:[]},d={json:{headers:{Accept:"application/json","Content-Type":"application/json"},data:e=>JSON.stringify(e),response:e=>e.json()}},p={},y={},f=async(e,t="GET",a=null,n={})=>{const i=Object.assign({},u,y,n),r="boolean"==typeof i.cache?i.cache:"GET"===t;if(r&&p[e])return p[e];const s=d[i.dataType];delete i.cache,delete i.dataType;const l={...i,method:t,headers:Object.assign(i.headers,s.headers,n.headers)};a&&(l.body=s.data&&s.data(a)||a);let o=fetch(e,l).then(e=>{if(!e.ok)throw new m(e);return s.response&&s.response(e)||e});return r&&(o=Promise.resolve(o),p[e]=o),o};var T=async(e,t={})=>f(e,"GET",null,t);var g=e=>{const t=[];return Object.entries(e).forEach(([e,a])=>{a&&t.push(encodeURIComponent(e)+"="+encodeURIComponent(a))}),t.join("&")},v=e=>{const t={};return(e||"").split("&").forEach(e=>{const a=e.indexOf("=");a>=0&&(t[decodeURIComponent(e.substring(0,a))]=decodeURIComponent(e.substring(a+1)))}),t};var b=e=>{const t={};return(...a)=>{const n=JSON.stringify(a);let i=t[n];return void 0===i&&(i=e.apply(void 0,a),t[n]=i),i}};const h=function(){if(null!=window.isDev)return window.isDev;const e=window.location.hostname.split(".")[0];return window.isDev=["localhost","internal","dev","dev2"].some(t=>e.includes(t)),window.isDev},P=function(){if(window.console&&window.console.log&&h())if(window.console.log.apply)window.console.log.apply(window.console,arguments);else for(var e=0;e<arguments.length;e++)window.console.log(arguments[e])},S=document.currentScript.src,A=S.indexOf("?"),{region:D,make:x}={...A<0?{}:v(S.substring(A+1)),...document.currentScript.dataset},E=new URL(S,window.location);var C={make:x||"Ford",region:D||"US",serviceHost:E.origin,libHost:E.origin+(E.pathname.startsWith("/cmslibs")?"/cmslibs":"")};var w={defaults:{appContext:"T1",planType:"MSRP",term:60,tradeIn:0,downPaymentPercentage:"CA"===C.region?0:.1,cash:{apr:"CA"===C.region?9:"Lincoln"===C.make?5:7,terms:[24,36,48,60,72],maxApr:26},inputConfig:{region:C.region,make:C.make,model:null,year:null,type:null,trim:null,configToken:null,vin:null,dealerPACode:null,zipcode:null,defaultTerm:null,paymentType:null,host:"BrandSite",plantype:"MSRP",changeVehicleUrl:null,includeTaxes:"CA"===C.region?1:0,includeLuxuryTax:!0,taxToggle:0,showFriendsAndNeighbors:null,paymentFrequency:"CA"===C.region&&"Ford"===C.make?"biweekly":"monthly",downPayment:null,tradeIn:null,options:{allowChangeVehicle:!0,allowChangeTrim:!0,allowChangeTab:!0,allowPrint:!0,allowSave:!1,allowSearchInventory:!1,allowPurchase:!0,showFooter:!0,isDealerConnect:!1,useOptionsLessAC:!1}}},localFeeTable:{AR:7.25,CT:12.25,KY:8,MA:13.75,MO:12.75,RI:16,"TX|C":6.5,"VA|C":17.75,"VA|R":13.25,WV:8.25},leaseOverrides:{"2021|Ford|Bronco|US":{LeaseTerm:[{Term:24,APR:5.66},{Term:36,APR:6.09},{Term:39,APR:6.28},{Term:48,APR:6.46}]}},creditOptions:{nameplateResiduals:{"2021|Ford|Mache|US":[{definers:["VS-KX","DR--B","EN-C1"],residuals:[{term:36,value:41},{term:48,value:34}]},{definers:["VS-KX","DR--B","EN-C1","ABFBP","J5XAB"],residuals:[{term:36,value:41},{term:48,value:34}]},{definers:["VS-KX","DR--B","EN-C1","HKLAG","J5XAB"],residuals:[{term:36,value:41},{term:48,value:34}]},{definers:["VS-KX","DR--F","EN-C2"],residuals:[{term:36,value:42},{term:48,value:35}]},{definers:["VS-KX","DR--F","EN-C2","ABFBP","J5XAB"],residuals:[{term:36,value:42},{term:48,value:35}]},{definers:["VS-KX","DR--F","EN-C2","HKLAG","J5XAB"],residuals:[{term:36,value:42},{term:48,value:35}]},{definers:["VS-KY","DR--B","EN-EH"],residuals:[{term:36,value:41},{term:48,value:34}]},{definers:["VS-LE","DR--B","EN-C1"],residuals:[{term:36,value:42},{term:48,value:35}]},{definers:["VS-LE","DR--B","EN-EH"],residuals:[{term:36,value:41},{term:48,value:34}]},{definers:["VS-LE","DR--F","EN-C2"],residuals:[{term:36,value:43},{term:48,value:36}]},{definers:["VS-LE","DR--F","EN-EJ"],residuals:[{term:36,value:42},{term:48,value:35}]},{definers:["VS-LE","DR--F","EN-EJ","ABJAJ"],residuals:[{term:36,value:42},{term:48,value:35}]},{definers:["VS-JZ","DR--E","EN-EK"],residuals:[{term:36,value:41},{term:48,value:34}]},{definers:["VS-JZ","DR--E","EN-EK","HKLAG"],residuals:[{term:36,value:41},{term:48,value:34}]},{definers:["VS-JZ","DR--E","EN-EK","CHABB"],residuals:[{term:36,value:41},{term:48,value:34}]},{definers:["VS-JZ","DR--E","EN-EK","CHABB","HKLAG"],residuals:[{term:36,value:41},{term:48,value:34}]},{definers:["VS-JZ","DR--E","EN-EL","DWBAP"],residuals:[{term:36,value:41},{term:48,value:34}]},{definers:["VS-JZ","DR--E","EN-EL","DWBAP","HKLAG"],residuals:[{term:36,value:41},{term:48,value:34}]}],"2022|Ford|F-150 Lightning|US":[{definers:["SE-JV","HTHAD"],residuals:[{term:36,value:52},{term:48,value:43}]},{definers:["SE-JV","HTHAE"],residuals:[{term:36,value:52},{term:48,value:43}]},{definers:["SE-GJ","HTHAD"],residuals:[{term:36,value:50},{term:48,value:42}]},{definers:["SE-GJ","HTHAE"],residuals:[{term:36,value:50},{term:48,value:42}]},{definers:["SE-GR","HTHAD"],residuals:[{term:36,value:47},{term:48,value:34}]},{definers:["SE-GR","HTHAE"],residuals:[{term:36,value:47},{term:48,value:34}]},{definers:["SE-GU","HTHAE"],residuals:[{term:36,value:45},{term:48,value:34}]}]},mileageAdjustments:[{mileage:7500,adjustment:4},{mileage:10500,adjustment:3},{mileage:12e3,adjustment:2},{mileage:13500,adjustment:1},{mileage:15e3,adjustment:0},{mileage:16500,adjustment:-1},{mileage:18e3,adjustment:-2},{mileage:19500,adjustment:-3}],defaultTerm:36,defaultAnnualMileage:10500,maxCashPercentage:45},flexBuy:{decrementRate:15,initialCalcTerm:{66:60,75:72},initialLimitTerm:36}};const M=C.serviceHost,L="trimName,nameplateDisplayNameShort,enable_tradeInLink,enable_creditLink,enable_disclaimer,enable_promoFriendsFamily,enable_standardLease,incentivesLink,configurationDisclaimer,applyDealerDiscount,dealerDiscountPercentage,globalDealerDiscountPercentage,isSevoEnabled,trimidOverride",R={MSRP:"MSRP",AZ:"AZPlan",FNX:"XPlan",PRX:"XPlan",SPX:"XPlan"},F=w.defaults,O={},I=(e,t,a)=>T(M+"/aemservices/common/api/attributes/proxy?"+g({client:"spc",region:C.region,url:e+"?"+g(t),filter:a})),N=e=>(P("SPC: api failure",e),null),k=e=>{if(r(e))Object.entries(e).forEach(([t,a])=>e[t]=k(a));else if(Array.isArray(e))e.forEach((t,a)=>e[a]=k(t));else if(/^[-+]?[0-9]*\.?[0-9]+$/.test(e))e=+e;else if(/^\d\d\d\d-\d\d-\d\d$/.test(e)){const t=e.split("-");e=new Date(t[0],t[1]-1,t[2])}return e},j=e=>(e&&l(e)||[]).map(e=>({id:e.Id,type:e.Type,name:e.Name,disclaimer:e.Disclaimer,amount:e.Amount||0,startDate:e.StartDate,endDate:e.ExpiryDate})),V=e=>(e&&l(e)||[]).reduce((e,t)=>("SUPPLEMENT_DA_CASH"!==t.Type&&"GOVT_EV_REBATE"!==t.Type&&(e+=t.Amount||0),e),0),_=e=>(l(e)||[]).map(e=>r(e)?{term:e.Term,apr:e.APR,cash:e.Cash}:{term:e}).sort((e,t)=>e.term>t.term?1:-1),B=e=>i(e)?e:0,G=(e,t)=>e+t,H=e=>O[e]||"NONE",z=e=>{const{applyDealerDiscount:t,dealerDiscountPercentage:a,globalDealerDiscountPercentage:n}=e._attributes||{};return t&&"false"!==t?isNaN(a)||isNaN(parseFloat(a))?isNaN(n)||isNaN(parseFloat(n))?0:Number(n):Number(a):0},q=(e,t,a,n,i=!1)=>{if(!(e&&e.PaymentEstimator&&e.Pricing))return null;try{P("dealer discount percentage",z(e))}catch(e){P("Error While logging discount percentage",e)}n=n||F.planType;const s=k(e.PaymentEstimator),o=k(e.Pricing),c="true"===o.PlanApplicability[n],m=R[n]||"MSRP",u=s.CashOffers&&s.CashOffers.CashOffer,d=(e=>{const t=(e.VehicleAttributes||e).Attribute;return Object.assign({},t&&l(t).reduce((e,t)=>(e[t.name]=t.Value,e),{}),e._attributes)})(e),p={modelLabel:d.nameplateDisplayNameShort||t,trimName:d.trimName,configToken:e.ConfigToken||e.NewConfigToken,imageToken:e.ImageToken||e.NewImageToken,configurationDisclaimer:d.configurationDisclaimer||d.BP2_Pages_VehicleName_Disclaimer,price:{planPrefix:m,planApplicable:c,full:o[m]||0,base:o["Base"+m]||0,options:o["Options"+("MSRP"===m?"":m)]||0,accessories:o["Accessories"+("MSRP"===m?"":m)]||0,discount:o[m+"Discount"]||0,dealerDiscountPercentage:z(e),residualizable:o["Residualizable"+m]||0,gasGuzzlerTax:o.GasGuzzlerTax||0,destinationCharges:o.DestinationDeliveryCharge||0,adjustments:j(o.Adjustments&&o.Adjustments.Adjustment),..."CA"===C.region?{deliveryAllowance:o.CADeliveryAllowance||0,optionsLessAc:o.CAOptionsLessAC||0,fepDiscount:o.CAFEPDiscount||0,acTax:o.CAACTax||0,greenLevy:o.CAGreenLevy||0,stewardship:o.CAStewardship||0,salesTaxMethod:o.CASalesTaxRateMethod,salesTaxRateEffective:B(o.CASalesTaxRateEffective),salesTaxRateHst:B(o.CASalesTaxRateHST),salesTaxRateGst:B(o.CASalesTaxRateGST),salesTaxRatePst:B(o.CASalesTaxRatePST),luxuryTax:i?o.LuxuryTax:0}:{}},payment:{fordCreditParams:s.FordCreditParams,cash:{maxRate:u&&u.MaxCustomRate||F.cash.maxApr,terms:_(u.Terms&&u.Terms.Term||F.cash.terms),defaultTerm:u.DefaultTerm||F.term,incentives:u&&j(u.Incentives.Incentive)||null}},attributes:d};if(r(s.LeasePayment)){const e=s.LeasePayment,n=(l(e.Residuals&&e.Residuals.Residual)||[]).map(e=>({term:e.Term,value:e.Value}));if("true"!==d.enable_standardLease||e.LeaseTerms&&e.LeaseTerms.LeaseTerm||!s.LeaseFactors||!s.LeaseFactors.LeaseFactor){const e=w.leaseOverrides[[a,C.make,t,C.region].join("|")];e&&(s.LeasePayment.LeaseTerms=e)}else{const t={LeaseTerm:l(s.LeaseFactors.LeaseFactor).map(e=>({APR:e.Rate,Term:e.EndTerm})).filter(e=>n.find(t=>t.term===e.Term))};t.LeaseTerm.length>0&&(e.LeaseTerms=t)}e.LeaseTerms&&e.LeaseTerms.LeaseTerm&&p.price.residualizable>0&&(p.payment.lease={minExpiryDate:e.LeaseIncentives&&e.LeaseIncentives.MinExpiryDate,terms:_(e.LeaseTerms.LeaseTerm),defaultTerm:e.DefaultTerm||F.term,disclaimer:e.LeaseTermsDisclaimer,maxCombinedValue:e.MaxCombinedValue||0,maxDownPayment:e.MaxDownPayment||0,maxTradeIn:e.MaxTradeIn||0,acquisitionFee:e.AcquisitionFee||0,startDate:e.StartDate,endDate:e.EndDate,mileageAdjustments:(l(e.AnnualMileageAdjustments&&e.AnnualMileageAdjustments.AnnualMileageAdjustment&&e.AnnualMileageAdjustments.AnnualMileageAdjustment)||[]).map(e=>({mileage:e.Mileage,adjustment:e.Adjustment})).sort((e,t)=>e.mileage-t.mileage),defaultAnnualMileage:e.DefaultAnnualMileage,residuals:n,incentives:j(e.LeaseIncentives.Incentive)})}if(s.FinanceOffers&&s.FinanceOffers.FinanceOffer){const n=(l(s.FinanceOffers.FinanceOffer)||[]).filter(e=>"Options"!==e.FinanceType&&"Flex Buy"!==e.FinanceType);p.payment.finance={offers:n.map((e,t)=>({offerIdx:t,terms:_(e.APRTerms.APRTerm),defaultTerm:e.DefaultTerm||F.term,disclaimer:e.Disclaimer,startDate:e.StartDate,endDate:e.EndDate,incentives:j(e.Incentives&&e.Incentives.Incentive),incentiveAmount:V(e.Incentives&&e.Incentives.Incentive)}))};const i={};let r=null;p.payment.finance.offers.forEach(e=>{e.terms.forEach(t=>{let a=i[t.term];a||(a={term:t.term,offers:[]},i[t.term]=a),a.offers.push({...t,...e})}),(!r||r<e.defaultTerm)&&(r=e.defaultTerm)}),p.payment.finance.terms=Object.values(i).sort((e,t)=>e.term>t.term?1:-1),p.payment.finance.defaultTerm=r;const o=(l(s.FinanceOffers.FinanceOffer)||[]).filter(e=>"Options"===e.FinanceType);if(o.length>0){const n=e.Parts?(l(e.Parts&&e.Parts.Part)||[]).reduce((e,t)=>(e[t.PartID]=1,e),{}):l(e.PartState&&e.PartState.PartClass||[]).reduce((e,t)=>(l(t.Part||[]).forEach(t=>{({Selectable:1,Excluded:1})[t.State]||(e[t.PartID]=1)}),e),{}),i=w.creditOptions,r=i.nameplateResiduals[`${a}|${C.make}|${t}|${C.region}`];if(r){let e=r.reduce((e,t)=>t.definers.every(e=>n[e])&&(null===e||e.definers.length<t.definers.length)?t:e,null);if(e){const t=o[0],a=Math.round(p.price.full*i.maxCashPercentage/100);p.payment.creditOptions={terms:_(t.APRTerms.APRTerm),defaultTerm:i.defaultTerm,defaultAnnualMileage:i.defaultAnnualMileage,mileageAdjustments:i.mileageAdjustments,residuals:e.residuals,disclaimer:t.Disclaimer,maxCombinedValue:a,maxDownPayment:a,maxTradeIn:a,startDate:t.StartDate,endDate:t.EndDate,incentives:j(t.Incentives&&t.Incentives.Incentive),incentiveAmount:V(t.Incentives&&t.Incentives.Incentive)}}}}const c=(l(s.FinanceOffers.FinanceOffer)||[]).filter(e=>"Flex Buy"===e.FinanceType);if(c.length>0){const e=c[0],t=w.flexBuy;p.payment.flexBuy={terms:_(e.APRTerms.APRTerm),defaultTerm:e.DefaultTerm,decrementRate:t.decrementRate,initialCalcTerm:t.initialCalcTerm,initialLimitTerm:t.initialLimitTerm,disclaimer:e.Disclaimer,startDate:e.StartDate,endDate:e.EndDate,incentives:j(e.Incentives&&e.Incentives.Incentive),incentiveAmount:V(e.Incentives&&e.Incentives.Incentive)}}}return p.fullTrimName=p.modelLabel+" "+p.trimName,p},J=b(e=>I("/geo/PostalCodes.json",{postalCode:e}).then(e=>{if(e&&e.Response&&e.Response.PostalCode){const t=e.Response.PostalCode,a=e=>{const a=l(t.Regions&&t.Regions.Region||[]).find(t=>t.type===e);return a&&a.Code||""};return"CA"===C.region?{geokey:t.Provinces&&t.Provinces.Province&&t.Provinces.Province.content,userProvince:t.Provinces&&t.Provinces.Province&&t.Provinces.Province.content}:{geokey:t.GeoKey,userFordRegion:a("Marketing"),userFDAFCode:a("Lincoln"===C.make?"LMDA":"FDAF"),userState:t.States&&t.States.State&&t.States.State.content}}},N)),U=b((e,t,a,n,i,r=!1)=>I("/products/ModelSlices.json",{appContext:F.appContext,planType:i||F.planType,staging:"false",showPaymentEstimatorV2:"true",sdlRates:"true",modelSliceDefiners:"modelTrimName",make:e,model:t,year:a,..."CA"===C.region?{province:n}:{geoKey:n}},"nameplateDisplayNameShort,trimName,enable_promoFriendsFamily,enable_standardLease,incentivesLink,brandNameplateTrimLink,configurationDisclaimerPartClasses,applyDealerDiscount,dealerDiscountPercentage,globalDealerDiscountPercentage,isSevoEnabled,trimidOverride").then(e=>{const n=e&&e.Response&&e.Response.Model;var s,o;return s=G(t,a),(o=n._attributes&&n._attributes.configurationDisclaimerPartClasses)&&(O[s]=o.replace(/,/g,";")),n&&{category:n.VehicleType,trims:l(n.ModelSlices&&n.ModelSlices.ModelSlice||[]).map(e=>{const n=q(e,t,a,i,r);return n.modelSliceTrim=e.name,n})}},N)),K=b((e,t,a,n,i,r=!1)=>I("/config/Details.json",{appContext:F.appContext,planType:i||F.planType,staging:"false",partClass:H(G(e,t)),showPaymentEstimatorV2:"true",sdlRates:"true",configToken:a,..."CA"===C.region?{province:n}:{geoKey:n}},L).then(e=>e&&e.Response&&q(e.Response,e.Response.Model,e.Response.Year,i,r)),N),X=b((e,t,a,n,i,r,s=!1)=>I("/inventory/Search.json",{appContext:F.appContext,planType:r||F.planType,partClass:H(G(e,t)),staging:"false",vehicleAttributes:"BP2_Pages_VehicleName_Disclaimer;",showPaymentEstimatorV2:"true",sdlRates:"true",vehicleStageFilter:"inproduction;onlot;intransit",make:C.make,model:e,year:t,vin:a,dealerPACode:n,postalCode:i},L).then(e=>{const t=e&&e.Response&&e.Response.VehicleSearch&&e.Response.VehicleSearch.Vehicles&&e.Response.VehicleSearch.Vehicles.Vehicle,a=q(t,t.Model.ModelName,t.Model.Year,r,s);return"US"===C.region?I("/dealer/Details.json",{make:C.make,dealerPACode:n}).then(e=>(e&&e.Response&&e.Response.Dealer&&"true"!==e.Response.Dealer.FordDirect&&(a.attributes.enable_creditLink="false",a.attributes.enable_tradeInLink="false"),a)):a},N)),$=b(()=>T(M+"/aemservices/common/api/attributes?"+g({client:"spc",region:C.region,make:C.make})).then(e=>e));var Z={ngpProxy:I,geoDetail:J,modelList:U,configDetail:K,vehicleDetail:X,attributesMap:$};const Y=["January","February","March","April","May","June","July","August","September","October","November","December"],W={yyyy:e=>e.getFullYear().toString(),yy:e=>W.yyyy(e).substring(2),m:e=>(e.getMonth()+1).toString(),mm:e=>W.m(e).padStart(2,"0"),mmmm:e=>Y[e.getMonth()],d:e=>e.getDate().toString(),dd:e=>W.d(e).padStart(2,"0"),h:e=>e.getHours().toString(),hh:e=>W.h(e).padStart(2,"0"),n:e=>e.getMinutes().toString(),nn:e=>W.n(e).padStart(2,"0"),s:e=>e.getSeconds().toString(),ss:e=>W.s(e).padStart(2,"0")};var Q={trim:e=>e.replace(/^\s+|\s+$/g,""),number:(e,{decimals:t=0,symbol:a="$",grouping:n=","})=>{const i=e<0?"-":"",r=parseInt(e=Math.abs(+e||0).toFixed(t))+"",s=r.length>3?r.length%3:0;return i+a+(s?r.substr(0,s)+n:"")+r.substr(s).replace(/(\d{3})(?=\d)/g,"$1"+n)+(+t?"."+Math.abs(e-r).toFixed(t).slice(2):"")},date:(e,t)=>{let a="",n=[];const i=()=>{const t=n.join("");a+=W[t]&&W[t](e)||t};for(let e=0;e<t.length;e++){const a=t.charAt(e);n.length>0&&a!==n[0]?(i(),n=[a]):n.push(a)}return i(),a},template:(e,t)=>e.replace(/\${([a-zA-Z0-9_]*)\}/gm,(e,a)=>t[a]||"")};const ee={US:{number:{decimals:0,symbol:"",grouping:","},currency:{decimals:0,symbol:"$",grouping:","},shortDate:"mm/dd/yyyy",longDate:"mmmm dd, yyyy"},CA:{number:{decimals:0,symbol:"",grouping:","},currency:{decimals:0,symbol:"$",grouping:","},shortDate:"dd/mm/yyyy",longDate:"dd mmmm yyyy"}}[C.region];var te={number:e=>i(e)&&Q.number(e,ee.number)||"",currency:e=>i(e)&&Q.number(e,ee.currency)||"",shortDate:e=>e&&Q.date(e,ee.shortDate)||"",longDate:e=>e&&Q.date(e,ee.longDate)||"",customDate:Q.date};const ae=w.defaults,ne="CA"===C.region,ie="US"===C.region;var re=(e,t,a)=>{const n=e.price,r=e.payment,s=i(a.defaultCustomApr)?Number.parseFloat(a.defaultCustomApr):ae.cash.apr,l=(e,t,a,n)=>e.find(e=>e[t]===a)||n&&l(e,t,n),o=e=>void 0===e.includeTaxes?t.includeTaxes:e.includeTaxes,c=e=>"monthly"===(e.paymentFrequency||t.paymentFrequency),m=()=>r.lease&&r.lease.terms&&n.residualizable>0,u=e=>"buy"===e.paymentType&&!e.buy.useCash,d=e=>m()&&"lease"===e.paymentType,p=e=>"buy"===e.paymentType&&e.buy.useFlexBuy,y=e=>u(e)&&r.finance.offers&&r.finance.offers[e.buy.offerIdx]||null,f=(e,t)=>{let a;if((e=>"creditOptions"===e.paymentType)(e)&&(a=r.creditOptions.incentives),p(e)&&(a=r.flexBuy.incentives),d(e))a=r.lease.incentives;else if(u(e)){const t=y(e);a=t&&t.incentives}else(e=>"buy"===e.paymentType&&e.buy.useCash)(e)&&(a=r.cash.incentives);const n=(e=>{let t,a;if(u(e)?(t=y(e),a=e.buy.term):d(e)&&(t=r.lease,a=e.lease.term),t){const e=t.terms.find(e=>e.term===a);if(e&&e.cash)return{amount:e.cash,disclaimer:(t.disclaimer||"").replace("[BENEFIT]",te.number(e.cash))}}return null})(e);return a=[...n&&[n]||[],...a||[]].filter(e=>t?e.type===t:"SUPPLEMENT_DA_CASH"!==e.type&&"GOVT_EV_REBATE"!==e.type),a.length>0?a:null},T=e=>{let t=(f(e)||[]).reduce((e,t)=>e+t.amount,0);return o(e)&&d(e)&&(t=Math.ceil(t/(1+n.salesTaxRateEffective/100))),t},g=e=>{let t;if(d(e))t=r.lease.minExpiryDate;else if(p(e))t=r.flexBuy.endDate;else{const a=y(e);t=a&&a.endDate}return t&&te.customDate(t,"yyyy-mm-dd")||null},v=e=>{const t=f(e,"GOVT_EV_REBATE");return t&&t[0]},b=e=>{let t=0;const a=v(e);if(a)if(d(e)){const a=l(r.lease.terms,"term",e.lease.term);t=a&&a.amount||0,o(e)&&(t=Math.ceil(t/(1+n.salesTaxRateEffective)))}else t=Math.abs(a.amount);return t},h=()=>l(n.adjustments,"type","SUPPLEMENT_DA_CASH"),S=()=>{const e=h();return e&&Math.abs(e.amount)||0},A=e=>{let a,i=n.full-(n.discount||0);return ne&&(i=i-(n.deliveryAllowance||0)-S()-n.fepDiscount+n.acTax+n.luxuryTax+n.greenLevy+n.stewardship,t.useOptionsLessAC&&n.optionsLessAc>0&&(i-=n.acTax),"buy"===e.paymentType&&(a=Math.min(e.tradeIn,i),o(e)&&(i+=Math.ceil((i-a)*(n.salesTaxRateEffective/100))))),i-T(e)-b(e)},D=(e,t)=>{const a=Math.ceil(A(e))-1,n="tradeIn"===t?[1,0]:[0,1];let i=e.downPayment,s=e.tradeIn;if("lease"===e.paymentType||"creditOptions"===e.paymentType){const t=T(e)+b(e);if(m()||"creditOptions"===e.paymentType){const l=r[e.paymentType];n.forEach(e=>{0===e?i=Math.min(i,Math.max(Math.min(a,l.maxCombinedValue-t)-s,0),l.maxDownPayment):s=Math.min(s,Math.max(Math.min(a,l.maxCombinedValue-t)-i,0),l.maxTradeIn)})}}else n.forEach(e=>{0===e?i=Math.max(Math.min(i,a-s),0):s=Math.max(Math.min(s,a-i),0)});return{downPayment:i,tradeIn:s}},x=(e,t,a)=>{const i=c(e),r=y(e);P("Price.luxuryTax "+n.luxuryTax);const s=A(e)-(a?0:e.downPayment)-e.tradeIn+(t||0),l=e.buy.apr/(i?1200:2600),o=e.buy.term*(i?1:26/12),m=0===Math.trunc(100*e.buy.apr)?s/o:l*s/(1-Math.pow(1/(1+l),o)),u=Math.ceil(o*m);return{paymentTotal:u,borrowingCost:u-s,payment:Math.ceil(m),initiativeStartDate:r&&r.startDate,initiativeEndDate:r&&r.endDate}},E=(e,a,i)=>{if(!m())return null;const{lease:s}=r,u=T(e)+b(e),p=(e=>{const a=n.full;let i,r=a-(n.discount||0);return ne&&(r=r-(n.deliveryAllowance||0)-S()-n.fepDiscount+n.acTax+n.luxuryTax+n.greenLevy+n.stewardship,t.useOptionsLessAC&&n.optionsLessAc>0&&(r-=n.acTax),P("basePrice "+a),"buy"===e.paymentType&&(i=Math.min(e.tradeIn,r),o(e)&&(r+=Math.ceil((r-i)*(n.salesTaxRateEffective/100))))),r-T(e)-b(e)})(e)+(a||0);P("discounted net price for label lease payment"+p);const y=c(e)?12:26,f=l(s.mileageAdjustments,"mileage",e.lease.annualMileage,s.defaultAnnualMileage),g=l(s.terms,"term",e.lease.term,s.defaultTerm),v=l(s.residuals,"term",e.lease.term,s.defaultTerm),h=p+u;P("msrp"+h);const A=n.residualizable-n.discount+(i||0)+(ne?n.acTax+n.greenLevy+n.stewardship:0);P("residual#"+A);const D=h-A+(ne?n.deliveryAllowance+n.fepDiscount+S():0),x=((e,t)=>{if(!e||e<0)return 0;if(!d(t)||n.dealerDiscountPercentage<=0)return 0;const a=.01*n.dealerDiscountPercentage;return Math.round(e*a*100)/100})(n.full,e),E=h-(ie?x:0)-e.downPayment-D-e.tradeIn-(h-p)+(ne?0:s.acquisitionFee);P("Principal#1"+E+"#accessoryPrice#"+D+"#dealerDiscount#"+x);const C=(v?v.value:0)+(f.adjustment||0),M=A*(C/100);P("Lev"+M);const L=g?g.apr/(100*y):0,R=Math.pow(1+L,e.lease.term/12*y),F=(E*R-M)*L,O=(R-1)*(1+L);P("numerator"+F+"denominator"+O);let I,N=F/O;ne&&(I=((e,t)=>{const a={HST:0,GST:0,PST:0};if(o(e))switch(n.salesTaxMethod){case"HST":a.HST=Math.ceil(t*(n.salesTaxRateHst/100));break;case"GST":a.GST=Math.ceil(t*(n.salesTaxRateGst/100));break;case"PST_GST_Separate":a.GST=Math.ceil(t*(n.salesTaxRateGst/100)),a.PST=Math.ceil(t*(n.salesTaxRatePst/100));break;case"GST_before_PST":a.GST=Math.ceil(t*(n.salesTaxRateGst/100)),a.PST=Math.ceil((t+a.GST)*(n.salesTaxRatePst/100))}return a.Total=a.HST+a.GST+a.PST,a})(e,N),N+=I.Total),P("Payment"+N);const k=s.incentives[0],j=w.localFeeTable[t.userState]||w.localFeeTable[t.userState+("comm"===t.type?"|C":"|R")]||0,V=n.full-n.discount+n.gasGuzzlerTax+s.acquisitionFee,_=("MA"===t.userState?n.base:V)/100*(j/100),B={pmt:N,paymentSalesTax:I,incentiveAmount:u,net:p,paymentsPerYear:y,mileageAdjustment:f,leaseTerm:g,residualTerm:v,msrp:h,res:A,accessoryPrice:D,principal:E,residual:C,lev:M,rateFactor:L,pow:R,numerator:F,denominator:O,incentive:k,localFeeRate:j,capitalizedCost:V,localFee:_,price:n,payment:r,selections:e};return P("🐛🐛🐛 Debug Values..."),P(B),{payment:N+_,signingAmount:Math.ceil(N)+e.downPayment+e.tradeIn+D+(ne?s.acquisitionFee:0),securityDeposit:25*Math.ceil(N/25),accessoryPrice:D,acquisitionFee:s.acquisitionFee,apr:g?g.apr:0,residual:v?v.value:0,initiativeStartDate:k?k.startDate:s.startDate,initiativeEndDate:k?k.endDate:s.endDate,paymentSalesTax:I,localFeeRate:j,localFee:_}},C=(e,t)=>{const a=r.creditOptions;if(!a)return null;const i=T(e)+b(e),s=l(a.mileageAdjustments,"mileage",e.creditOptions.annualMileage,a.defaultAnnualMileage),o=l(a.terms,"term",e.creditOptions.term,a.defaultTerm),c=l(a.residuals,"term",e.creditOptions.term,a.defaultTerm),m=(c?c.value:0)+(s.adjustment||0),u=A(e)+(t||0),d=u+i,p=Math.trunc(d*m/100),y=u-e.downPayment-e.tradeIn+n.gasGuzzlerTax,f=o.term,g=(o.apr||0)/100;let v;if(g>0){const e=Math.pow(1+g/12,f-1),t=g*e/(12*(e-1)),a=g/(12*(Math.pow(1+g/12,f)-(1+g/12)));v=Math.trunc(y*t-p*a)}else v=Math.trunc((y-p)/(f-1));return{payment:v,balloonPayment:p,apr:o.apr||0,initiativeStartDate:a.startDate,initiativeEndDate:a.endDate}},M=(e,t)=>{const a=r.flexBuy,n=l(a.terms,"term",e.buy.term,a.defaultTerm),i=A(e)-e.downPayment-e.tradeIn+(t||0);P("principal##"+i);const s=n.apr/1200,o=0===Math.trunc(100*n.apr),c=a.initialCalcTerm[n.term],m=(100-a.decrementRate)/100*(o?i/c:s*i/(1-Math.pow(1/(1+s),c))),u=n.term-a.initialLimitTerm,d=Math.pow(1+s,a.initialLimitTerm),p=o?i-m*a.initialLimitTerm:m*(1-d)/s+i*d,y=o?p/u:s*p/(1-Math.pow(1/(1+s),n.term-a.initialLimitTerm)),f=Math.ceil(a.initialLimitTerm*m+u*y);return{paymentTotal:f,borrowingCost:f-i,payment:Math.ceil(m),initiativeStartDate:a.startDate,initiativeEndDate:a.endDate,initialPayment:Math.ceil(m),initialTerms:"1-"+a.initialLimitTerm,finalPayment:Math.ceil(y),finalTerms:`${a.initialLimitTerm+1}-${n.term}`}},L=(e,t,a,r)=>{let s=null,l={...e};return i(a)||e.downPaymentEntered||(l.downPayment=Math.ceil((n.full-n.discount)*ae.downPaymentPercentage),l={...l,...D(l,"downPayment")}),d(l)&&(P("Payment-isLeaseLuxarytax"+n.luxuryTax),s=E(l,a,r),P("Payment-isLease"+s)),"buy"!==e.paymentType&&"purchase"!==e.paymentType||(s=e.buy.useFlexBuy&&"buy"===e.paymentType?M(l,a):x(l,a,"purchase"===e.paymentType)),"creditOptions"===e.paymentType&&(s=C(l,a)),s&&!1!==t&&(s.payment=Math.ceil(s.payment)),{payment:s,selections:l}};return{limitDownPaymentTradeIn:D,calculateLowestPayment:e=>{const t={downPaymentEntered:!1,downPayment:e.downPayment>0?e.downPayment:Math.ceil((n.full-n.discount)*ae.downPaymentPercentage),paymentFrequency:e.paymentFrequency,tradeIn:e.tradeIn>0?e.tradeIn:ae.tradeIn,buy:{apr:s,aprCash:s,aprSpecial:0,term:ae.term,useCash:!1,cashOnly:!1,useFlexBuy:!1,offerIdx:-1,paymentFrequency:e.paymentFrequency},lease:{term:ae.term,annualMileage:0,enabled:!1,paymentFrequency:e.paymentFrequency},creditOptions:{term:w.creditOptions.defaultTerm,annualMileage:w.creditOptions.defaultAnnualMileage,enabled:!1},paymentType:"lease"};let a=Number.MAX_VALUE,i=Number.MAX_VALUE,l=Number.MAX_VALUE,o=null,c=null,u=-1,d=e.paymentType;if(m()){t.paymentType="lease",t.lease.annualMileage=r.lease.defaultAnnualMileage,o=r.lease.defaultTerm;for(const e of r.lease.terms){t.lease.enabled=!0,t.lease.term=e.term;const n=Math.ceil(E(t).payment);(n<a||n===a&&o>e.term)&&(o=e.term,a=n)}t.lease.term=o}if(t.paymentType="buy",r.finance&&r.finance.offers&&r.finance.offers.length>0){o=null;for(let e=0;e<r.finance.offers.length;e++){t.buy.offerIdx=e;const a=r.finance.offers[e];for(const n of a.terms){t.buy.term=n.term,t.buy.apr=n.apr||0,t.buy.aprSpecial=t.buy.apr;const a=x(t).payment;(a<i||a===i&&o>n.term)&&(u=e,o=n.term,c=t.buy.apr,i=a,t.buy.useCash=!1)}}}else o=r.cash.defaultTerm||ae.term,t.buy.term=o,t.buy.useCash=!0,t.buy.cashOnly=!0,i=x(t).payment;return c&&(t.buy.apr=c,t.buy.aprSpecial=c),u>=0&&(t.buy.offerIdx=u),t.buy.term=o,r.creditOptions&&(t.paymentType="creditOptions",t.creditOptions.enabled=!0,l=C(t).payment),d&&("buy"===d||t.creditOptions.enabled&&"creditOptions"===d||t.lease.enabled&&"lease"===d)?t.paymentType=d:t.paymentType=t.creditOptions.enabled?"creditOptions":t.lease.enabled&&a<i?"lease":"buy",t.buy.paymentFrequency=e.paymentFrequency,t.lease.paymentFrequency=e.paymentFrequency,{payment:"creditOptions"===t.paymentType?l:"lease"===t.paymentType?a:i,selections:t}},calculatePayment:L,calculatePartPayments:(e,t)=>{const a=L(e).payment.payment;if(a){const n=t=>L(e,!0,t.price||0,t.res||0).payment.payment-a;return Array.isArray(t)?t.map(n):Object.entries(t).reduce((e,[t,a])=>(e[t]=n(a),e),{})}},priceDetail:(e,a)=>{const i=a&&a.acquisitionFee||0,r=A(e),s="purchase"===e.paymentType?0:e.downPayment,l={price:r+n.gasGuzzlerTax+i,basePrice:n.base,options:n.options,accessories:n.accessories,discount:n.discount,discountedOptions:n.options-n.discount,incentives:T(e),incentiveList:f(e)||[],destinationCharges:n.destinationCharges,fullPrice:n.full,sellingPrice:n.full-n.discount+n.gasGuzzlerTax+i,planApplicable:n.planApplicable,payment:a?a.payment:null,downPayment:s,tradeIn:e.tradeIn,financeAmount:r-s-e.tradeIn+n.gasGuzzlerTax+i,paymentType:e.paymentType,optionsLessAC:n.optionsLessAc};if(ne&&t.useOptionsLessAC&&(l.discountedOptions=n.optionsLessAc-n.discount),ne||(l.gasGuzzlerTax=n.gasGuzzlerTax),l.baseAsShown=l.basePrice+l.discountedOptions,"buy"===e.paymentType||"purchase"===e.paymentType?(l.buy={apr:e.buy.apr,term:e.buy.term,paymentFrequency:e.paymentFrequency,specialApr:e.buy.useFlexBuy||!e.buy.useCash,flexBuy:!!e.buy.useFlexBuy,paymentTotal:a.paymentTotal,borrowingCost:a.borrowingCost,initiativeStartDate:a.initiativeStartDate,initiativeEndDate:a.initiativeEndDate,goodThruDate:g(e)},e.buy.useFlexBuy&&(l.buy.initialPayment=a.initialPayment,l.buy.initialTerms=a.initialTerms,l.buy.finalPayment=a.finalPayment,l.buy.finalTerms=a.finalTerms)):"creditOptions"===e.paymentType?l.creditOptions={apr:a.apr,balloonPayment:a.balloonPayment,term:e.creditOptions.term,initiativeStartDate:a.initiativeStartDate,initiativeEndDate:a.initiativeEndDate,goodThruDate:g(e)}:(m()&&!ne&&(a.signingAmount=a.payment+e.downPayment+e.tradeIn+a.accessoryPrice+(ne?a.acquisitionFee:0)),P("payment.signingAmount"+a.signingAmount),l.lease=m()?{term:e.lease.term,annualMileage:e.lease.annualMileage,signingAmount:a.signingAmount,securityDeposit:a.securityDeposit,accessoryPrice:a.accessoryPrice,acquisitionFee:a.acquisitionFee,apr:Math.round(100*a.apr)/100,initiativeStartDate:a.initiativeStartDate,initiativeEndDate:a.initiativeEndDate,residualValue:a.residual,paymentFrequency:e.paymentFrequency,localFee:a.localFee,goodThruDate:g(e)}:{}),ne){if(l.caDeliveryAllowance=n.deliveryAllowance,l.caSupplementDeliveryAllowanceIncentive=h()||[],l.caSupplementDeliveryAllowance=S(),l.caEmployeePricingDiscount=n.fepDiscount,l.caEvRebateIncentive=v(e),l.caEvRebate=b(e),l.caAcTax=n.acTax,l.caGreenLevy=n.greenLevy,l.caStewardshipFee=n.stewardship,l.luxuryTax=n.luxuryTax||0,l.caTotalFees=l.destinationCharges+l.caAcTax+l.caGreenLevy+l.caStewardshipFee,l.caSalesTaxableAmount=l.basePrice+l.discountedOptions+l.accessories+l.luxuryTax+l.caTotalFees-l.caDeliveryAllowance-l.caSupplementDeliveryAllowance-l.caEmployeePricingDiscount-l.tradeIn,l.lease){if(m){const e=a&&a.paymentSalesTax;e&&(l.caLeasePaymentSalesTax=e.Total,l.caLeasePaymentHST=e.HST,l.caLeasePaymentGST=e.GST,l.caLeasePaymentPST=e.PST)}l.caSalesTax=0}else o(e)?l.caSalesTax=Math.ceil(l.caSalesTaxableAmount*(n.salesTaxRateEffective/100)):l.caSalesTax=0;l.price=l.caSalesTaxableAmount+l.tradeIn+l.caSalesTax-l.incentives-l.caEvRebate,l.financeAmount=l.caSalesTaxableAmount+l.caSalesTax-l.incentives-l.caEvRebate-l.downPayment}return P(l),l}}};var se=(e,t)=>{let a=null;const n=(document.cookie||"").split("; ");for(const i of n){const n=i.indexOf("=");if(i.substring(0,n)===e){a=i.substring(n+1),t&&(a=decodeURIComponent(a));break}}return a};const le=w.defaults,oe=window,ce=e=>!!(e.make&&e.model&&e.year&&e.zipcode),me=e=>[e.make,e.model,e.year,e.zipcode,e.plantype,e.trim,e.vin,e.paymentType].join("|"),ue=w.defaults.inputConfig,de=e=>({...ue,...e||{},zipcode:pe(e),options:{...ue.options,...e&&e.options||{}}}),pe=e=>{let t=e.zipcode||"";if(!t){const e=v(se("FPI"));e.zip&&(t=e.zip)}return t||"BrandSite"!==e.host||"US"!==C.region||(se("userInfo")||"").split(",").every(e=>{if("zip="===e.substr(0,4))return t=e.substr(4,5),!0}),t},ye=()=>{window.sessionStorage.removeItem("SPC_USER_SELECTIONS")},fe=(e,t)=>{const a=me(e),n=window.sessionStorage.getItem("SPC_USER_SELECTIONS");let i={_reset:!0};if(n){const{configKey:e,selections:t}=JSON.parse(n);a===e&&(i=t)}return["paymentType","downPayment","tradeIn","paymentFrequency"].forEach(a=>{(t[a]||0===t[a])&&(i[a]=t[a]),a in i||(i[a]=e[a])}),i},Te=(e,t)=>{window.sessionStorage.setItem("SPC_USER_SELECTIONS",JSON.stringify({configKey:me(e),selections:t}))},ge=(e,t)=>{if(s(e))try{e(t)}catch(e){}},ve=async(e,t,a)=>{let n=e.zipcode&&await Z.geoDetail(e.zipcode);n||(n={geokey:null}),e.includeLuxuryTax=!0;const i=Z.attributesMap(),r=Z.modelList(e.make,e.model,e.year,n.geokey,e.plantype,"CA"===C.region&&e.includeLuxuryTax),[s,l]=await Promise.all([i,r]),o=[s,l];if(!l)throw ge(a,e),new Error("SPC: Unable to resolve trims");const c={type:e.type,userState:n.userState,useOptionsLessAC:e.options.useOptionsLessAC,includeTaxes:e.includeTaxes,includeLuxuryTax:"CA"===C.region&&e.includeLuxuryTax},m=l.trims.map(e=>{const a=re(e,c,s),n=a.calculateLowestPayment(t);return{detail:e,calculator:a,lowestPayment:n}});return m.sort((e,t)=>e.lowestPayment.payment-t.lowestPayment.payment),{geo:n,attributesAndTrimdetail:o,paymentConfig:c,trimPricing:m}},be=async(e,t,a)=>{const{geo:n,attributesAndTrimdetail:i,paymentConfig:r,trimPricing:s}=await ve(e,t,a),l=i[0],o=i[1];let c,m=e.configToken||e.trim;if(s.length>0)if(m){for(const t of s)if(t.detail.configToken===m){e.modelSliceTrim=t.detail.modelSliceTrim;break}}else{const t=s[0].detail;e.trim=t.configToken,e.modelSliceTrim=t.modelSliceTrim,m=e.trim}if(e.includeLuxuryTax=!0,c=e.vin&&e.dealerPACode?await Z.vehicleDetail(e.model,e.year,e.vin,e.dealerPACode,e.zipcode,e.plantype,"CA"===C.region&&e.includeLuxuryTax):await Z.configDetail(e.model,e.year,m,n.geokey,e.plantype,"CA"===C.region&&e.includeLuxuryTax),!c)throw ge(a,e),new Error("SPC: Unable to resolve configuration");const u=re(c,r,l);if(t._reset){t=u.calculateLowestPayment(t).selections}t={...t,...u.limitDownPaymentTradeIn(t)};const d=u.calculatePayment(t);return{geo:n,attributesMap:l,trims:o,selections:t,detail:c,calculator:u,payment:d}},he=(e,t,a,n,i)=>({...e,...t,...i,...a&&{creditParameters:a.payment.fordCreditParams,attr:a.attributes,configString:a.configurationDisclaimer,configDisclaimer:a.configurationDisclaimer,modelLabel:a.modelLabel,label:a.fullTrimName,trimName:a.fullTrimName,stTrimName:a.trimName,configToken:a.configToken,imageToken:a.imageToken}||{},category:n&&n.category}),Pe=async(e,t,a)=>{const n=de(t),i=fe(n,t);if(!ce(n))return ge(e,n),void console.log("SPC: Invalid input configuration");const{geo:r,detail:s,calculator:l,payment:o,selections:c,trims:m}=await be(n,i,e),u=l.priceDetail(c,o.payment),d=he(n,r,s,m,u);return a&&(d.partPayments=l.calculatePartPayments(c,a)),ge(e,d),d},Se=async(e,t)=>{const a=de(t),n=fe(a,t);if(!ce(a))throw ge(e,a),new Error("SPC: Invalid input configuration");const r=await ve(a,n,e),s=await Z.attributesMap(),l=r.trimPricing.map(({calculator:e,detail:t,lowestPayment:a})=>{const n={},r=o(a.selections);return r.lease.enabled&&(r.paymentType="lease",n.lease=e.priceDetail(r,e.calculatePayment(r).payment)),r.paymentType="buy",r.buy.cashOnly||(n.finance=e.priceDetail(r,e.calculatePayment(r).payment)),r.buy.useCash=!0,r.buy.term=le.term,r.buy.apr=i(s.defaultCustomApr)?Number.parseFloat(s.defaultCustomApr):le.cash.apr,n.cash=e.priceDetail(r,e.calculatePayment(r).payment),{...n,trim:t.configToken,trimName:t.fullTrimName,stTrimName:t.trimName,modelSliceTrim:t.modelSliceTrim,brandNameplateTrimLink:t.attributes.brandNameplateTrimLink,configToken:t.configToken,imageToken:t.imageToken}}),c=l[0],m=r.trimPricing[0],u=r.attributesAndTrimdetail[1],d={...a,...r.geo,attr:m&&m.detail.attributes,configString:m&&m.detail.configurationDisclaimer,configDisclaimer:m&&m.detail.configurationDisclaimer,modelLabel:m&&m.detail.modelLabel,label:m&&m.detail.fullTrimName,trimName:m&&m.detail.fullTrimName,category:u.category,trim:c&&c.configToken,stTrimName:c&&c.stTrimName,modelSliceTrim:c&&c.modelSliceTrim,configToken:c&&c.configToken,imageToken:c&&c.imageToken,trimPayments:l};return ge(e,d),d};let Ae=null;const De=async(e,t,a,n)=>{let i,r,s,l,o,m,u;const d=async a=>{i=de({...t,...a});const n=fe(i,t);({geo:r,detail:s,calculator:l,payment:o,selections:m,trims:u}=await be(i,n,e)),r.geokey||(i.zipcode="");const c=await Z.attributesMap(),y=((e,t)=>{const a={},n=new RegExp("^disc(\\w*)_"+({BrandSites:"brand",ShoppingTools:"shop",Ecommerce:"ecom"}[e]||"brand"));return Object.entries(t||{}).forEach(([e,t])=>{const i=n.exec(e);i&&(a[i[1]]=t)}),a})(i.host,c);return{context:C,config:i,trims:u,selections:m,detail:s,calculator:l,pricing:l.priceDetail(m,o.payment),reportEvent:p,setConfig:d,saveSelections:Te,disclosuresMap:y}},p=(e,{config:t,detail:n,pricing:i})=>{if(a)try{a(e,he(t,r,n,u,i))}catch(e){}},y=d(),f=(async()=>(Ae||(await c(`${C.libHost}/etc.clientlibs/common/clientlibs/generated/common-vue-${C.make.toLowerCase()}.js`),oe.fdcc.component&&(Ae=oe.fdcc.component.load("spc"))),Ae))(),[T,g]=await Promise.all([y,f]);g.show(T,n).then(({config:t,detail:a,pricing:n})=>{const i=he(t,r,a,u,n);return ge(e,i),i})};oe.fdcc||(oe.fdcc={init:e=>{e()},spc:{isBusy:()=>!1,calculate:Pe,calculateTrimPayments:Se,show:De,resolveConfigData:be,saveSelections:Te,reset:ye}})}]);