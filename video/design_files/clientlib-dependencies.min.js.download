!function(){var e={492:function(){window.FMC=Object.assign(window.FMC||{},{Logger:new class{constructor(){this.componentList=[],this.enabledLogs=this.getEnabledLogsFromLocalStorage(),this.logs=new Map,this.globalLoggingEnabled=this.getGlobalLoggingEnabledFromUrl(),this.includedLogLevels=["log","info","warn","error","debug","trace","table"],this.validLogLevels=["log","info","warn","error","debug","trace","table"],this.globalLoggingEnabled&&console.log("%cGlobal logging is enabled. To disable, remove enableLogs=true from current page URL","color: green;"),this.enabledLogs.length>0&&(console.log(`%cLogging is enabled for components: ${this.enabledLogs.join(", ")}`,"color: green;"),console.log("%cTo disable logging, use window.FMC.Logger.disableAllLogs() or window.FMC.Logger.disableLog(componentName)","color: yellow;"))}log(e,...o){this._log("log",e,o)}error(e,...o){this._log("error",e,o)}warn(e,...o){this._log("warn",e,o)}info(e,...o){this._log("info",e,o)}debug(e,...o){this._log("debug",e,o)}trace(e,...o){this._log("trace",e,o)}table(e,...o){this._log("table",e,o)}_log(e,o,t){if(this.storeLog(e,o,t),this._isLogLevelIncluded(e)&&(this.globalLoggingEnabled||this.enabledLogs.includes(o))){const n=this._getLogColor(e);"table"===e?(console.log(`%c[${o}]`,`color: ${n};`),console.table(...t)):console[e](`%c[${o}]`,`color: ${n};`,...t)}}storeLog(e,o,t){this.logs.has(o)||this.logs.set(o,[]),this.logs.get(o).push({type:e,logOutput:t,timestamp:new Date}),this.trackComponent(o)}trackComponent(e){this.componentList.includes(e)||this.componentList.push(e)}enableLog(e){this.enabledLogs.includes(e)||(this.enabledLogs.push(e),this.debounceSetLocalStorage(),console.log(`%cLogging enabled for: ${e}`,"color: green;"),this.printComponentLogs(e))}disableLog(e){const o=this.enabledLogs.indexOf(e);-1!==o&&(this.enabledLogs.splice(o,1),this.debounceSetLocalStorage(),console.log(`%cLogging disabled for: ${e}`,"color: red;"))}disableAllLogs(){this.enabledLogs=[],this.debounceSetLocalStorage(),console.log("%cAll logging disabled","color: red;")}disableAllExcept(e){this.enabledLogs=[e],this.debounceSetLocalStorage(),console.log(`%cLogging disabled for all except: ${e}`,"color: yellow;")}enableAllLogs(){this.enabledLogs=[...new Set(this.componentList)],this.debounceSetLocalStorage(),console.log("%cAll logging enabled","color: green;")}getEnabledLogsFromLocalStorage(){const e=localStorage.getItem("enabledLogs");return e?JSON.parse(e):[]}getGlobalLoggingEnabledFromUrl(){const e=new URLSearchParams(window.location.search).get("enableLogs");if("true"===e)return this.enableAllLogs(),!0;if(e){return e.split(",").map((e=>e.trim())).forEach((e=>{this.enableLog(e)})),!1}return!1}_debounce(e,o){let t;return(...n)=>{clearTimeout(t),t=setTimeout((()=>e.apply(this,n)),o)}}debounceSetLocalStorage=this._debounce((()=>{localStorage.setItem("enabledLogs",JSON.stringify(this.enabledLogs))}),1e3);_isLogLevelIncluded(e){return this.includedLogLevels.includes(e)}_getLogColor(e){return{log:"green",error:"red",warn:"orange",info:"blue",debug:"gray",trace:"magenta",table:"cyan"}[e]||"black"}addLogLevel(e){this.validLogLevels.includes(e)?this.includedLogLevels.includes(e)?console.warn(`%cLog level already included: ${e}`,"color: yellow;"):(this.includedLogLevels.push(e),console.log(`%cLog level added: ${e}`,"color: green;")):console.warn(`%cInvalid log level: ${e}`,"color: red;")}removeLogLevel(e){const o=this.includedLogLevels.indexOf(e);-1!==o?(this.includedLogLevels.splice(o,1),console.log(`%cLog level removed: ${e}`,"color: red;")):console.warn(`%cLog level not found: ${e}`,"color: yellow;")}toggleGlobalLogging(){this.globalLoggingEnabled=!this.globalLoggingEnabled,console.log("%cGlobal logging "+(this.globalLoggingEnabled?"enabled":"disabled"),"color: green;")}printComponentList(){0!==this.componentList.length?(console.log("%cLogged Components:","color: orange;"),this.componentList.forEach((e=>{const o=this.enabledLogs.includes(e)?"green":"orange";console.log(`%c- ${e}`,`color: ${o}`)}))):console.log("%cNo components have logged yet.","color: gray;")}printComponentLogs(e){this.logs.has(e)?(console.log(`%cLogs for component: ${e}`,"color: green;"),this.logs.get(e).forEach((o=>{"table"===o.type?(console.log(`%c[${e}] ${o.timestamp.toISOString()}`,"color: cyan;"),console.table(...o.logOutput)):console[o.type](`%c[${e}] ${o.timestamp.toISOString()}`,"color: green;",...o.logOutput)}))):console.log(`%cNo logs for component: ${e}`,"color: gray;")}printAllComponentLogs(){this.logs.forEach(((e,o)=>{this.printComponentLogs(o)}))}exportLogs(){const e={};this.logs.forEach(((o,t)=>{e[t]=o}));const o={logs:e,url:window.location.href,exportedAt:(new Date).toISOString()},t=new Blob([JSON.stringify(o,null,2)],{type:"application/json"}),n=URL.createObjectURL(t),i=document.createElement("a");i.href=n,i.download="logs.json",i.click(),URL.revokeObjectURL(n)}}})},451:function(){window.FMC.Metrics=Object.assign(window.FMC.Metrics||{},{Launch:new class{constructor(){this.attempts=0,this.applicationVariables={},this.pageAction={},this.jsonRegex=/{\(([.,a-zA-Z0-9_: \$]*)\)}/gm}async firePageBottom(){if("function"==typeof window._satellite?.pageBottom)try{window._satellite?.pageBottom(),window.FMC?.Logger?.log("pmod-metrics","[launch.firePageBottom] -> page bottom fired",{applicationVariables:this.applicationVariables,pageAction:this.pageAction,digitaldata:window.digitaldata})}catch(e){window.FMC?.Logger?.error("pmod-metrics","[launch.firePageBottom] _satellite pageBottom error",e)}}async isDtmLoaded(){return!!window._satellite||(this.attempts<20?(this.attempts++,setTimeout((()=>this.isDtmLoaded()),100)):window.FMC?.Logger?.error("pmod-metrics","[launch.init] DTM library not loaded at init call."),!1)}getDatasetWithDollarPrefix(e){const o=e?.dataset,t={};for(const e in o)o?.hasOwnProperty?.(e)&&(t[`$${e}`]=o[e]);return t}initializeButtons(){$("body").on("click","[data-ford-metrics-click]",(async e=>{const o=this.getDatasetWithDollarPrefix(e.currentTarget);await this.fireDirect(e.currentTarget.attributes["data-ford-metrics-click"].value,o)}))}parseObject(e){if(e&&"string"==typeof e)try{e=JSON.parse(e)}catch(e){window.FMC?.Logger?.error("pmod-metrics","[launch.parseObject] -> Failed to parse object")}return e||null}async fireDirect(e,o){if(e=this.parseObject(e),o=this.parseObject(o),this.isDtmLoaded())try{e?.name?(window.digitaldata=this.getActionDigitalData(e,o),window._satellite.track(e.name),window.FMC?.Logger?.log("pmod-metrics","[launch.fireDirect] -> "+e.name,{action:e,data:o,applicationVariables:this.applicationVariables})):window.FMC?.Logger?.log("pmod-metrics","[launch.fireDirect] -> No Action Name",{action:e,data:o,applicationVariables:this.applicationVariables}),e?.secondary&&(window.digitaldata=this.getActionDigitalData(e,o),window._satellite.track(e.secondary),window.FMC?.Logger?.log("pmod-metrics","[launch.fireDirect] -> "+e.secondary,{action:e,data:o,applicationVariables:this.applicationVariables}))}catch(t){window.FMC?.Logger?.error("pmod-metrics","[launch.fireDirect] Uncaught Exception",t,{action:e,data:o,applicationVariables:this.applicationVariables})}else window.FMC?.Logger?.error("pmod-metrics","** DTM CALL DISABLED ** [launch.fireDirect] -> "+e.name,{action:e,data:o,applicationVariables:this.applicationVariables})}substituteMetricsValue(e,o){const t=this.getVariableValue.bind(this);return e?e.toString().replace(this.jsonRegex,(function(e,n){const i=n.split(","),a=i[0],r=t(a,null,o);return null!==r?(i[1]||"")+r+(i[2]||""):""})):""}getVariableValue(e,o,t){let n=o?.variables?.[e];return n||(n=this?.pageAction?.variables?.[e]),n&&(n.includes("{("+e+")")||n.includes("{("+e+","))&&(n=this.checkForInfiniteRecursion(n,e)),"application"!==n&&n||(n=this?.applicationVariables?.[e]),!n&&t&&(n=t[e]),this.substituteMetricsValue(n,t)}checkForInfiniteRecursion(e,o){return FMC?.Logger?.log("pmod-metrics","Infinite Recursion Detected","Variable: "+o,"Authored Value: "+e),e=e.replaceAll("{("+o+")}","Invalid substitution").replaceAll("{("+o+",:)}","Invalid substitution")}getActionDigitalData(e,o){const t={},n=[];return Object.keys(e?.variables).forEach((i=>{t[i]=this.getVariableValue(i,e,o);const a={Variable:i,Authored:e.variables[i],"Digital Data":t[i]};n.push(a)})),window.FMC?.Logger?.table("pmod-metrics",n),this.getVariablesObject(t)}getVariablesObject(e){const o={};return Object.keys(e).forEach((t=>{const[n,i]=t.split("_"),a=e[t];n&&i&&(o[n]=o[n]||{},o[n][i]=a)})),o}async loadScript(e){return new Promise(((o,t)=>{const n=document.createElement("script");n.src=e,n.async=!0,n.onload=()=>{FMC?.Logger?.log("pmod-metrics","[launch.loadScript] DTM Script Loaded "+e),o()},n.onerror=()=>{FMC?.Logger?.error("pmod-metrics","[launch.loadScript] DTM Script Failed to Load "+e),t(new Error(`Failed to load script: ${e}`))},document.head.appendChild(n)}))}async pageLoad({applicationVariables:e,pageAction:o}){this.applicationVariables=e,this.pageAction=this.parseObject(o),!window._satellite&&window?.FMC?.Metrics?.dtmScript&&await this.loadScript(window.FMC.Metrics.dtmScript),this.pageAction?.app&&window.FMC?.Logger?.log("pmod-metrics","[launch.pageLoad] Metrics Page Load - "+this.pageAction.name,{applicationVariables:e,pageAction:this.pageAction}),this.isDtmLoaded()&&await this.fireDirect(this.pageAction,null),this.initializeButtons()}}})}},o={};function t(n){var i=o[n];if(void 0!==i)return i.exports;var a=o[n]={exports:{}};return e[n](a,a.exports,t),a.exports}!function(){"use strict";t(492),t(451);var e=function(){return e=Object.assign||function(e){for(var o,t=1,n=arguments.length;t<n;t++)for(var i in o=arguments[t])Object.prototype.hasOwnProperty.call(o,i)&&(e[i]=o[i]);return e},e.apply(this,arguments)},o=function(e,o,t,n){return new(t||(t=Promise))((function(i,a){function r(e){try{c(n.next(e))}catch(e){a(e)}}function l(e){try{c(n.throw(e))}catch(e){a(e)}}function c(e){var o;e.done?i(e.value):(o=e.value,o instanceof t?o:new t((function(e){e(o)}))).then(r,l)}c((n=n.apply(e,o||[])).next())}))},n=function(e,o){var t,n,i,a,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(t)throw new TypeError("Generator is already executing.");for(;r;)try{if(t=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,n=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(!(i=r.trys,(i=i.length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){r=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){r.label=a[1];break}if(6===a[0]&&r.label<i[1]){r.label=i[1],i=a;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(a);break}i[2]&&r.ops.pop(),r.trys.pop();continue}a=o.call(e,r)}catch(e){a=[6,e],n=0}finally{t=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}},i=function(e,t,i){return o(void 0,void 0,void 0,(function(){var o,a,r,l,c,s,g;return n(this,(function(n){switch(n.label){case 0:o=function(e){return Object.keys(e).map((function(o){return"".concat(encodeURIComponent(o),"=").concat(encodeURIComponent(e[o]))})).join("&")},a=window.FMC.context.header,r=a.region,l=a.shopUrlFord,((c={client:"common",filter:i,region:r,url:"".concat(e,"?").concat(o(t))}).url.includes("@")||c.url.includes("%40"))&&(c.url+="/%"),n.label=1;case 1:return n.trys.push([1,4,,5]),[4,fetch("".concat(l,"/aemservices/common/api/attributes/proxy?").concat(o(c)),{headers:{"Content-Type":"application/json"},method:"GET"})];case 2:if(!(s=n.sent()).ok)throw new Error("HTTP error! status: ".concat(s.status));return[4,s.json()];case 3:return[2,n.sent()];case 4:throw g=n.sent(),g instanceof Error&&window.FMC.Logger.error("FMC link","Error fetching attributes proxy: ".concat(null==g?void 0:g.message)),g;case 5:return[2]}}))}))},a=function(t){return o(void 0,void 0,void 0,(function(){var o,a,r,l,c,s,g,d,u,p,h,m;return n(this,(function(n){switch(n.label){case 0:return o={},a={brandNameplateLink:"brandNameplateLink",ngpTrimName:"ngpTrimName",trimId:"trimId",trimName:"trimName",urlKey:"urlKey"},t.model&&t.year||t.configToken?(r=Object.keys(a).join(","),t.configToken?[4,i("/config/Details.json",{appContext:"T1",configToken:t.configToken,partClass:"NONE",returnAttributes:"NGP_ModelInfo_VehicleType"},r)]:[3,2]):[2,null];case 1:return(null==(g=n.sent())?void 0:g.Response)?(l=g.Response,c=e(e({},(b=l.Attribute,f={},Array.isArray(b)&&b.forEach((function(e){e.name&&e.Value&&(f[e.name]=e.Value)})),f)),l._attributes),s={make:l.Make,model:l.Model,year:l.Year},(o=e(e({},o),s)).trim=t.configToken,o.config=t.configToken,Object.assign(t,s),Object.keys(c).forEach((function(e){a[e]&&(o[a[e]]=c[e])})),c.NGP_ModelInfo_VehicleType&&(o.vehicleType=c.NGP_ModelInfo_VehicleType),[3,4]):[2,null];case 2:return[4,i("/products/ModelSlices.json",e(e({},t),{appContext:"T1",modelSliceDefiners:"modelId"}),r)];case 3:if(g=n.sent(),d=null===(m=g.Response)||void 0===m?void 0:m.Model){if(u=d._attributes,o.vehicleType=d.VehicleType,o.year=t.year,t.trim&&(p=t.trim.trim(),h=null,Array.isArray(d.ModelSlices.ModelSlice)&&d.ModelSlices.ModelSlice.forEach((function(e){var t=e._attributes,n=t.ngpTrimName;if(p=p.toLowerCase(),(n=n.toLowerCase())===p)return h=n,Object.assign(u,t),o.trim=e.ConfigToken,o.config=e.ConfigToken,!1})),!h))return window.FMC.Logger.error("FMC link","Trim not found ".concat(t.trim)),[2,null];Object.keys(u).forEach((function(e){a[e]&&(o[a[e]]=u[e])}))}n.label=4;case 4:return[2,o]}var b,f}))}))};function r(e,o){var t=function(e){var o=[],t=window.FMC.context.header.region;return"US"!==t&&"CA"!==t||"2021"!==e&&"2022"!==e||(o={CA:{2021:["f-150 commercial","transit chassis","transit commercial","superduty commercial","chassis cab","ecosport","mache","expedition","ranger","mustang","edge","superduty","escape","f-150","transit vanwagon","transit","explorer","navigator","corsair","nautilus"],2022:["transit connect","superduty commercial","chassis cab","superduty","aviator"]},US:{2021:["ecosport","expedition","ranger","f-150","transit vanwagon","transit","transit chassis","mustang","escape","edge","navigator","corsair","nautilus"],2022:["transit connect","transit connect wagon","superduty","superduty commercial","chassis cab","nautilus","aviator"]}}[t][e]),o}(o);return t.indexOf((e||"").toLowerCase())>=0}var l=function(t){return o(void 0,void 0,void 0,(function(){var o,i,l,c,s,g,d,u,p,h,m;return n(this,(function(n){switch(n.label){case 0:return t.preventDefault(),o=function(e){var o=e.indexOf("#$");return-1!==o?e.slice(o):e},i=window.FMC.context.header.make,l=t.target,c=l,"A"!==l.tagName&&(c=l.closest("a")),g=(s=c).href,d=s.target,u=c.closest("[data-link-context]"),p={make:i},u&&(p=e(e({},p),JSON.parse(null!==(m=u.dataset.linkContext)&&void 0!==m?m:"{}"))),[4,a(p)];case 1:return h=n.sent(),function(e,o,t,n){var i=window.FMC.context.header,a=i.make,l=i.shopUrlFord,c=/^#\$(\w*)(\/\w*)?(\/\$\(.*\))?(\?.*)?$/g.exec(e);if(c){var s=void 0,g=c[1],d=window.FMC.util.url.getQueryParams(c[4]||"?");switch(g){case"bp":if(n){var u=r(t.model,t.year),p=("Lincoln"===a?u:!u)?"/configure/":"/build/";if(s=[l,p,n.urlKey,"/",t.year,"/"],u)if(t.configToken){var h="/configure/"===p?"exterior":"config";s.push("#/",h,"/",n.config)}else t.trim&&s.push("#/select/",n.config);else t.configToken?s.push("config/exterior/",n.config):t.trim&&n.trimId&&s.push("model/customize/",n.trimId)}else s=[l,"/showroom/"],d.linktype="build";break;case"si":n?((s=[l,"/inventory/"]).push(n.urlKey||t.model.replace(/\s/g,"").toLowerCase(),"/",t.year,"/"),t.trim&&(d.selectTrim=n.ngpTrimName)):(s=[l,"/showroom/"],d.linktype="inventory");break;default:return void window.FMC.Logger.log("FMC link","Unknown link: ".concat(c.toString()))}if(s){d&&s.push("?".concat(window.FMC.util.url.toQueryString(d)));var m=null==s?void 0:s.join("");m&&("_blank"===o?window.open(m):window.location.assign(m))}}}(o(g),d,p,h),[2]}}))}))};window.FMC.link={handleSpecialLinkClick:l};window.FMC.util={cookie:{get:function(e){var o=document.cookie.split(";"),t=null;return o.forEach((function(o){var n=o.trim().split("="),i=n[0],a=n[1];i===e&&(t=decodeURIComponent(a))})),t},set:function(e,o,t,n,i,a){void 0===t&&(t=!1),void 0===n&&(n=7),void 0===i&&(i="/"),void 0===a&&(a=window.location.hostname);var r=new Date;r.setTime(r.getTime()+24*n*60*60*1e3);var l="expires=".concat(r.toUTCString());document.cookie=t?"".concat(e,"=").concat(o,"; ").concat(l,"; path=").concat(i,"; domain=").concat(a):"".concat(e,"=").concat(encodeURIComponent(o),"; ").concat(l,"; path=").concat(i,"; domain=").concat(a)}},url:{getQueryParams:function(e,o){void 0===o&&(o=!0);var t=o&&e.startsWith("?")?e.slice(1):e,n=new URLSearchParams(t),i={};return n.forEach((function(e,o){i[o]=e||null})),i},toQueryString:function(e){return Object.entries(e).map((function(e){var o=e[0],t=e[1];return null==t?"":Array.isArray(t)?t.map((function(e){return"".concat(encodeURIComponent(o),"=").concat(encodeURIComponent(e))})).join("&"):"".concat(encodeURIComponent(o),"=").concat(encodeURIComponent(t))})).filter((function(e){return""!==e})).join("&")}}}}()}();